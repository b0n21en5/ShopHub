import{r as m,u as f,b as $,j as a,e as d,_ as c}from"./index-e4b7f291.js";const q="_main_1spmv_1",w="_cnt_1spmv_13",D="_bg_white_1spmv_33",E="_post_form_1spmv_43",N="_btn_cnt_1spmv_101",F="_btn_1spmv_101",P="_submit_btn_1spmv_135",S="_delete_btn_1spmv_143",s={main:q,cnt:w,bg_white:D,post_form:E,btn_cnt:N,btn:F,submit_btn:P,delete_btn:S},I=()=>{const[y,b]=m.useState([]),[t,u]=m.useState({name:"",photo:"",desc:"",quantity:"",price:"",category:"",subCategory:"",rating:"",discount:"",delivery:"",brand:""}),{slug:o,links:n,id:p}=f(),l=$(),h=async()=>{try{const{data:e}=await d.get(`/api/${n}/get-single/${p}`);u({name:e.name,photo:"",desc:e.desc,quantity:e.quantity,price:e.price,category:e.category,subCategory:e.subcategory,rating:e.rating,discount:e.discount,delivery:e.delivery,brand:e.brand})}catch(e){c.error(e.response.data.message)}},_=async()=>{try{const{data:e}=await d.get("/api/category/get-all");b(e)}catch(e){c.error(e.response.data.message)}};m.useEffect(()=>{n&&p&&h(),_()},[]);const v=async()=>{try{const e=new FormData;e.append("name",t.name),e.append("photo",t.photo),e.append("desc",t.desc),e.append("quantity",t.quantity),e.append("price",t.price),e.append("category",t.category),e.append("subcategory",t.subCategory),e.append("rating",t.rating),e.append("discount",t.discount),e.append("delivery",t.delivery),e.append("brand",t.brand);const{data:i}=await d.post(`/api/${o}/add-new`,e);c.success(i.message),l(`/admin/${o}`)}catch(e){c.error(e.response.data.message)}},x=async()=>{try{const e=new FormData;e.append("name",t.name),t.photo instanceof File&&e.append("photo",t.photo),e.append("desc",t.desc),e.append("quantity",t.quantity),e.append("price",t.price),e.append("category",t.category),e.append("subcategory",t.subCategory),e.append("rating",t.rating),e.append("discount",t.discount),e.append("delivery",t.delivery),e.append("brand",t.brand);const{data:i}=await d.put(`/api/${n}/update/${p}`,e);c.success(i.message),l(`/admin/${n}`)}catch(e){c.error(e.response.data.message)}},j=async e=>{e.preventDefault(),o?v():n&&x()},C=async()=>{try{const{data:e}=await d.delete(`/api/${n}/delete/${p}`);c.success(e.message),l(`/admin/${n}`)}catch(e){c.error(e.response.data.message)}},r=(e,i)=>{u(i==="photo"?g=>({...g,[i]:e.target.files[0]}):g=>({...g,[i]:e.target.value}))};return a.jsx("div",{className:s.main,children:a.jsxs("div",{className:`${s.cnt} ${n?s.bg_white:""}`,children:[n&&a.jsx("img",{src:`/api/${n}/photo/${p}`,alt:"product/category image",width:200,height:200}),a.jsxs("form",{className:`${s.post_form} ${n?s.bg_trans:""}`,onSubmit:j,children:[a.jsx("input",{type:"text",placeholder:`Enter ${o} name`,onChange:e=>r(e,"name"),value:t.name,autoFocus:!0,required:!0}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>r(e,"photo"),required:o}),(o==="products"||n==="products")&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{onChange:e=>r(e,"category"),required:o,children:[a.jsx("option",{value:"",disabled:!0,selected:o,children:"Select Category"}),y.map(e=>a.jsx("option",{value:e._id,selected:n&&e._id===t.category,children:e.name},e._id))]}),a.jsx("input",{type:"text",placeholder:"Enter sub category",onChange:e=>r(e,"subCategory"),value:t.subCategory}),a.jsx("input",{type:"text",placeholder:"Enter product specification",onChange:e=>r(e,"desc"),value:t.desc}),a.jsx("input",{type:"text",placeholder:"Enter product brand",onChange:e=>r(e,"brand"),value:t.brand,required:!0}),a.jsx("input",{type:"number",placeholder:"Price of the product",onChange:e=>r(e,"price"),value:t.price,required:!0}),a.jsx("input",{type:"number",placeholder:"Discount rate",onChange:e=>r(e,"discount"),value:t.discount,required:!0}),a.jsx("input",{type:"number",placeholder:"Product rating",onChange:e=>r(e,"rating"),value:t.rating,required:!0}),a.jsx("input",{type:"number",placeholder:"Delivery time in days",onChange:e=>r(e,"delivery"),value:t.delivery,required:!0}),a.jsx("input",{type:"number",placeholder:"Enter product quantity",onChange:e=>r(e,"quantity"),value:t.quantity,required:!0})]}),a.jsxs("div",{className:s.btn_cnt,children:[a.jsx("button",{className:`${s.btn} ${s.submit_btn}`,type:"submit",children:o?"Submit":"Update"}),n&&a.jsx("button",{className:`${s.btn} ${s.delete_btn}`,onClick:C,children:"Delete"})]})]})]})})};export{I as default};
