import{r as h,G as w,a as v,b as j,j as e,F as u,N as d,L as p,e as _,O as b,_ as l}from"./index-3d8f536d.js";const f="_auth_cnt_tvyo6_1",N="_auth_left_tvyo6_21",E="_head_tvyo6_47",P="_sub_head_tvyo6_59",k="_auth_right_tvyo6_71",C="_terms_tvyo6_123",F="_term_link_tvyo6_137",L="_cta_button_tvyo6_145",S="_sign_up_tvyo6_171",U="_log_in_tvyo6_181",n={auth_cnt:f,auth_left:N,head:E,sub_head:P,auth_right:k,terms:C,term_link:F,cta_button:L,sign_up:S,log_in:U},D=()=>{const[a,i]=h.useState({login:"",password:"",showPass:!1,username:"",email:"",phone:"",address:"",answer:""}),g=w();let o=v().pathname.split("/");o=o[1];const c=j(),r=(s,t)=>{i(y=>({...y,[t]:s.target.value}))},m=async s=>{s.preventDefault();try{const{data:t}=await _.post("/api/auth/login",{email:a.login,phone:parseInt(a.login),password:a.password});t&&(g(b(t)),l.success(`${t.username} logged in!`),c("/"))}catch(t){l.error(t.response.data.message)}},x=async s=>{s.preventDefault();try{const{data:t}=await _.post("/api/auth/register",{username:a.username,email:a.email,phone:a.phone,password:a.password,address:a.address,answer:a.answer});t&&(l.success(t.message),c("/login"))}catch(t){l.error(t.response.data.message)}};return h.useEffect(()=>{i({login:"",password:"",showPass:!1,username:"",email:"",phone:"",address:"",answer:""})},[o]),e.jsxs("div",{className:n.auth_cnt,children:[e.jsxs("div",{className:n.auth_left,children:[e.jsxs("div",{children:[e.jsx("div",{className:n.head,children:o==="login"?"Login":"Looks like you're new here!"}),e.jsx("div",{className:n.sub_head,children:o==="login"?"Get access to your Orders, Wishlist and Recommendations":"Sign up with your mobile number to get started"})]}),e.jsx("img",{width:220,height:130,src:"./src/assets/auth.png",alt:"auth"})]}),e.jsxs("form",{className:n.auth_right,onSubmit:s=>o==="login"?m(s):x(s),children:[o==="login"?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",autoFocus:!0,placeholder:"Enter Email/Mobile number",onChange:s=>r(s,"login"),value:a.login}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("input",{type:`${a.showPass?"text":"password"}`,placeholder:"Enter Password",onChange:s=>r(s,"password"),value:a.password}),e.jsx(u,{icon:d,onClick:()=>i(s=>({...s,showPass:!s.showPass})),style:{cursor:"pointer"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",autoFocus:!0,placeholder:"Enter Username",onChange:s=>r(s,"username"),value:a.username}),e.jsx("input",{type:"text",placeholder:"Enter Email address",onChange:s=>r(s,"email"),value:a.email}),e.jsx("input",{type:"number",placeholder:"Enter Mobile number",onChange:s=>r(s,"phone"),value:a.phone}),e.jsx("input",{type:"text",placeholder:"Enter Your address",onChange:s=>r(s,"address"),value:a.address}),e.jsx("input",{type:"text",placeholder:"Your Favorite Sport?",onChange:s=>r(s,"answer"),value:a.answer}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("input",{type:`${a.showPass?"text":"password"}`,placeholder:"Enter Password",onChange:s=>r(s,"password"),value:a.password}),e.jsx(u,{icon:d,onClick:()=>i(s=>({...s,showPass:!s.showPass})),style:{cursor:"pointer"}})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:n.terms,children:["By continuing, you agree to Flipkart's"," ",e.jsx("span",{className:n.term_link,children:"Terms of Use"})," and"," ",e.jsx("span",{className:n.term_link,children:"Privacy Policy"}),"."]}),e.jsx("button",{type:"submit",className:n.cta_button,children:o==="login"?"Login":"Sign Up"}),o==="login"?e.jsx(p,{to:"/sign-up",className:n.sign_up,children:"New to ShopHub? Create an account"}):e.jsx(p,{to:"/login",className:n.log_in,children:"Existing User? Log in"})]})]})]})};export{D as default};
