import{r as n,u as as,a as cs,b as ts,j as s,F as d,f as is,c as rs,d as M,L as ns,e as o,_ as r,l as ds}from"./index-3d8f536d.js";const os="_details_cnt_7iwy1_1",ls="_details_7iwy1_1",_s="_detail_left_7iwy1_27",ps="_img_cnt_7iwy1_45",ms="_cta_btn_cnt_7iwy1_79",ys="_btn_7iwy1_93",hs="_add_cart_7iwy1_127",us="_buy_now_7iwy1_135",gs="_detail_right_7iwy1_145",xs="_p_name_7iwy1_159",js="_pd_price_7iwy1_167",fs="_pay_7iwy1_179",Ns="_off_7iwy1_197",ws="_sec_7iwy1_207",vs="_secLeft_7iwy1_221",bs="_specs_cnt_7iwy1_233",Ss="_spec_heading_7iwy1_245",zs="_specs_7iwy1_233",Ds="_similar_products_section_7iwy1_279",Ps="_heading_7iwy1_293",$s="_similar_products_cnt_7iwy1_305",ks="_similar_product_7iwy1_279",Cs="_review_7iwy1_363",Os="_rating_7iwy1_373",Ls="_price_cnt_7iwy1_403",As="_price_7iwy1_403",Is="_grey_7iwy1_439",a={details_cnt:os,details:ls,detail_left:_s,img_cnt:ps,cta_btn_cnt:ms,btn:ys,add_cart:hs,buy_now:us,detail_right:gs,p_name:xs,pd_price:js,pay:fs,off:Ns,sec:ws,secLeft:vs,specs_cnt:bs,spec_heading:Ss,specs:zs,similar_products_section:Ds,heading:Ps,similar_products_cnt:$s,similar_product:ks,review:Cs,rating:Os,price_cnt:Ls,price:As,grey:Is},Ts=()=>{var m,y,h,u,g,x,j,f,N,w,v,b,S,z,D,P,$,k,C,O,L,A,I,R,F,J,T;const[e,q]=n.useState({}),[B,K]=n.useState([]),{pid:_}=as(),U=cs().pathname.split("/")[1],p=ts(),W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q=new Date,H=async()=>{try{const{data:c}=await o.get(`/api/products/get-single/${_}`);try{c.desc=JSON.parse(c.desc)}catch{}q(c)}catch(c){r.error(c.response.data.message)}};n.useEffect(()=>{H()},[]);const Y=async()=>{try{const{data:c}=await o.get(`/api/products/similar-products/${e.category}/${e._id}`);K(c)}catch(c){r.error(c.response.data.message)}};n.useEffect(()=>{e.category!==void 0&&Y()},[e]);const G=()=>{let c=[];localStorage.getItem("cart")!==null&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(_),localStorage.setItem("cart",JSON.stringify(c)),r.success("item added to cart"),p("/cart")};function V(c){return new Promise(t=>{const i=document.createElement("script");i.src=c,i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},document.body.appendChild(i)})}async function X(){if(!await V("https://checkout.razorpay.com/v1/checkout.js")){r.error("Razorpay SDK failed to load. Are you online?");return}const t=await o.post("/api/products/payment",{products:[e]});if(!t){r.error("Server error. Are you online?");return}const{amount:i,id:E,currency:Z}=t.data,ss={key:"rzp_test_Ao1CK0KgMgwLrb",amount:i.toString(),currency:Z,name:"ShopHub Corp",description:"Test Transaction",image:ds,order_id:E,handler:async function(l){const es={orderCreationId:E,razorpayPaymentId:l.razorpay_payment_id,razorpayOrderId:l.razorpay_order_id,razorpaySignature:l.razorpay_signature};(await o.post("/api/products/payment/success",{paymentDetails:es,products:[e]})).data.status==="Payment successful"&&(r.success("Order Placed!"),p("/account/orders"))},prefill:{name:"",email:"splitter@example.com",contact:"9999999999"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#61dafb"}};new Razorpay(ss).open()}return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:a.details_cnt,children:s.jsxs("div",{className:a.details,children:[s.jsxs("div",{className:a.detail_left,children:[s.jsx("div",{className:a.img_cnt,children:s.jsx("img",{src:e._id?`/api/products/photo/${e==null?void 0:e._id}`:"",alt:e==null?void 0:e.name})}),s.jsxs("div",{className:a.cta_btn_cnt,children:[s.jsxs("button",{onClick:G,className:`${a.add_cart} ${a.btn}`,children:[s.jsx(d,{icon:is}),"ADD TO CART"]}),s.jsxs("button",{className:`${a.buy_now} ${a.btn}`,onClick:X,children:[s.jsx(d,{icon:rs}),"BUY NOW"]})]})]}),s.jsxs("div",{className:a.detail_right,children:[s.jsx("div",{className:a.p_name,children:e.name}),s.jsxs("div",{className:`${a.rating}`,children:[e.rating,s.jsx(d,{icon:M})]}),s.jsx("div",{className:a.off,children:"Special price"}),s.jsxs("div",{className:a.pd_price,children:[s.jsxs("span",{className:a.pay,children:[" ","₹",e.discount?parseInt(e.price*(100-e.discount)/100):e.price]}),s.jsxs("strike",{children:["₹",e.price]}),s.jsxs("span",{className:a.off,children:[" ",e.discount,"% off"]})]}),s.jsxs("div",{className:a.sec,children:[s.jsx("div",{className:a.secLeft,children:"Delivery"}),s.jsxs("div",{className:a.secRight,children:["Delivery by"," ",(()=>{const c=new Date;c.setDate(Q.getDate()+e.delivery);const t=c.getDate(),i=W[c.getMonth()];return`${t} ${i}`})()," ","| ",s.jsx("span",{className:a.off,children:"Free"})," ",s.jsx("strike",{children:"40"})]})]}),s.jsxs("div",{className:a.sec,children:[s.jsx("div",{className:a.secLeft,children:"Quantity"}),s.jsx("div",{className:a.secRight,children:e.quantity})]}),s.jsxs("div",{className:a.specs_cnt,children:[s.jsx("div",{className:a.spec_heading,children:"Specifications"}),s.jsxs("div",{className:a.specs,children:[((m=e.desc)==null?void 0:m.ram)&&s.jsxs("span",{children:["Ram: ",(y=e.desc)==null?void 0:y.ram]}),((h=e.desc)==null?void 0:h.storage)&&s.jsxs("span",{className:a.grey,children:["Storage: ",(u=e.desc)==null?void 0:u.storage]}),((g=e.desc)==null?void 0:g.camera)&&s.jsxs("span",{className:a.grey,children:["Camera: ",(x=e.desc)==null?void 0:x.camera]}),((j=e.desc)==null?void 0:j.battery)&&s.jsxs("span",{className:a.grey,children:["Battery: ",(f=e.desc)==null?void 0:f.battery]}),((N=e.desc)==null?void 0:N.cpu)&&s.jsxs("span",{className:a.grey,children:["CPU: ",(w=e.desc)==null?void 0:w.cpu]}),((v=e.desc)==null?void 0:v.quantity)&&s.jsxs("span",{className:a.grey,children:["Net Quantity: ",(b=e.desc)==null?void 0:b.quantity]}),((S=e.desc)==null?void 0:S.weight)&&s.jsxs("span",{className:a.grey,children:["Weight: ",(z=e.desc)==null?void 0:z.weight]}),((D=e.desc)==null?void 0:D.type)&&s.jsxs("span",{className:a.grey,children:["Type: ",(P=e.desc)==null?void 0:P.type]}),(($=e.desc)==null?void 0:$.flavor)&&s.jsxs("span",{className:a.grey,children:["Flavor: ",(k=e.desc)==null?void 0:k.flavor]}),((C=e.desc)==null?void 0:C.preferrance)&&s.jsxs("span",{className:a.grey,children:["Preferrance: ",(O=e.desc)==null?void 0:O.preferrance]}),((L=e.desc)==null?void 0:L.pack)&&s.jsxs("span",{className:a.grey,children:["Pack: ",(A=e.desc)==null?void 0:A.pack]}),((I=e.desc)==null?void 0:I.warranty)&&s.jsxs("span",{className:a.grey,children:["Warranty: ",(R=e.desc)==null?void 0:R.warranty]}),((F=e==null?void 0:e.desc)==null?void 0:F.size)&&s.jsxs("span",{className:a.grey,children:["Size:"," ",(T=(J=e==null?void 0:e.desc)==null?void 0:J.size)==null?void 0:T.map(c=>c.toUpperCase()+", ")]})]})]})]})]})}),s.jsxs("div",{className:a.similar_products_section,children:[s.jsx("div",{className:a.heading,children:"Similar Products"}),s.jsx("div",{className:a.similar_products_cnt,children:B.map(c=>s.jsxs(ns,{to:`/${U}/${c._id}`,target:"_blank",className:a.similar_product,children:[s.jsx("div",{className:a.img_cnt,children:s.jsx("img",{src:`/api/products/photo/${c._id}`,alt:c.name})}),s.jsx("div",{children:c.name.length>61?c.name.substr(0,62)+"...":c.name}),s.jsx("div",{className:a.review,children:s.jsxs("div",{className:a.rating,children:[c.rating,s.jsx(d,{icon:M})]})}),s.jsxs("div",{className:a.price_cnt,children:[s.jsxs("span",{children:["₹",parseInt(c.price*(100-c.discount)/100)]}),s.jsx("strike",{className:a.price,children:c.price}),s.jsxs("span",{className:a.off,children:[c.discount,"% off"]})]})]},c._id))})]})]})};export{Ts as default};
